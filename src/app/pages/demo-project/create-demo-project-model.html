<div mat-dialog-title class="d-flex">
    <h2>Add Project</h2>
    <button type="button" class="close ml-auto" mat-dialog-close>
        <span aria-hidden="true">&times;</span>
    </button>
</div>

<form #bannerForm="ngForm" nz-form [nzLayout]="'vertical'" (ngSubmit)="onClick()">
    <mat-dialog-content class="mat-typography pt-3">
        <div class="row mt-3">
            <div class="col-md-9">
                <nz-form-item>
                    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="title_en">Title (EN)</nz-form-label>
                    <nz-form-control nzErrorTip="Title (EN) is required!">
                        <input nz-input [(ngModel)]="data.title_en" name="title_en" required id="title_en"
                            #title_en="ngModel" placeholder="Title (EN)" />
                    </nz-form-control>
                </nz-form-item>
                <nz-form-item>
                    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="title_bn">Title (BN)</nz-form-label>
                    <nz-form-control nzErrorTip="Title (EN) is required!">
                        <input nz-input [(ngModel)]="data.title_bn" name="title_bn" id="title_bn" #title_bn="ngModel"
                            placeholder="Title (BN)" />
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="project_type" nzRequired>Project Type</nz-form-label>
                    <nz-form-control nzErrorTip="The role is required!">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a type"
                            [(ngModel)]="data.project_type" name="project-type">
                            <nz-option [nzLabel]="'Upcoming'" [nzValue]="1"></nz-option>
                            <nz-option [nzLabel]="'Ongoing'" [nzValue]="2"></nz-option>
                            <nz-option [nzLabel]="'Completed'" [nzValue]="3"></nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
                <nz-form-item>
                    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="product_type" nzRequired>Product Type</nz-form-label>
                    <nz-form-control nzErrorTip="The role is required!">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a type"
                            [(ngModel)]="data.product_type" name="product-type">
                            <nz-option *ngFor="let ptype of productTypeCollection" [nzLabel]="ptype.name"
                                [nzValue]="ptype.id"></nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
                <nz-form-item>
                    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="city" nzRequired>City</nz-form-label>
                    <nz-form-control nzErrorTip="The role is required!">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a city" [(ngModel)]="data.city"
                            name="city">
                            <nz-option *ngFor="let cityItem of cityCollection" [nzLabel]="cityItem.city"
                                [nzValue]="cityItem.id"></nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="video_url">Video URL</nz-form-label>
                    <nz-form-control>
                        <input nz-input [(ngModel)]="data.video_url" name="video_url" id="video_url"
                            #video_url="ngModel" placeholder="Video URL" />
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="address_en">Address (EN)</nz-form-label>
                    <nz-form-control nzErrorTip="Title (EN) is required!">
                        <input nz-input [(ngModel)]="data.address_en" name="address_en" required id="address_en"
                            #address_en="ngModel" placeholder="Address (EN)" />
                    </nz-form-control>
                </nz-form-item>
                <nz-form-item>
                    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="address_bn">Address (BN)</nz-form-label>
                    <nz-form-control nzErrorTip="Title (EN) is required!">
                        <input nz-input [(ngModel)]="data.address_bn" name="address_bn" id="address_bn"
                            #address_bn="ngModel" placeholder="Address (BN)" />
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="description_en">Description
                        (EN)</nz-form-label>
                    <nz-form-control nzErrorTip="Description (EN) is required!">
                        <app-tinymce nz-input [(ngModel)]="data.description_en" #tinymce='tinymce' name="description_en"
                            required id="description_bn" placeholder="Bank Description (BN)" required></app-tinymce>
                    </nz-form-control>
                </nz-form-item>
                <nz-form-item>
                    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="description_bn">Description
                        (BN)</nz-form-label>
                    <nz-form-control nzErrorTip="Description (BN) is required!">
                        <app-tinymce nz-input [(ngModel)]="data.description_bn" #tinymce='tinymce' name="description_bn"
                            id="description_bn" placeholder="Bank Description (BN)"></app-tinymce>
                    </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="status" nzRequired>Status</nz-form-label>
                    <nz-form-control nzErrorTip="The role is required!">
                        <nz-switch id="status" [ngModel]="data.status" [(ngModel)]="data.status" name="status"
                            nzCheckedChildren="Active" nzUnCheckedChildren="In-active"></nz-switch>
                    </nz-form-control>
                </nz-form-item>
            </div>
            <div class="col-md-3">
                <nz-card nzHoverable [nzCover]="coverTemplate" class="ant-img-up-card">
                    <button type="button" (click)="fileInput.click()" *ngIf='!ChangeImg'
                        class="btn btn-sm btn-default text-white btn-block">
                        <i class="fa fa-upload mr-2"></i>
                        <small *ngIf="data.project_type">Upload Image</small>
                        <small *ngIf="!data.project_type">Upload Image Or Video</small>
                    </button>
                    <input style="display: none" type="file" (change)="Changed($event)" #fileInput>
                    <button type="button" (click)="fileInput.click()" *ngIf='ChangeImg'
                        class="btn btn-primary mr-2 mt-2 btn-sm btn-default text-white"><i class="fa fa-upload"></i>
                        Change
                    </button>
                    <button type="button" class="btn btn-danger btn-sm mt-2 text-white" data-dismiss="inputfile"
                        *ngIf='ChangeImg' (click)="RemoveImage()"><i class="fa fa-times"> </i> Remove</button>
                </nz-card>

                <ng-template #coverTemplate>
                    <ng-container *ngIf="fileType == 'image'">
                        <img alt="image" class="p-2" height="150px" [src]="ImageFile" />
                    </ng-container>
                    <ng-container *ngIf="fileType == 'video'">
                        <video [src]="ImageFile" autoplay controls width="400"></video>
                    </ng-container>
                </ng-template>

                <small *ngIf="!data.project_type" class="text-danger"><i class="fa fa-info mr-1"></i>Dimensions for
                    image
                    ( 945 x 826 ) px.</small>
                <small *ngIf="data.project_type" class="text-danger"><i class="fa fa-info mr-1"></i>Dimensions for
                    ( 945 x 826 ) px.</small>
            </div>
        </div>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <button class="btn btn-sm btn-danger text-white" mat-dialog-close>
            <i class="fa fa-times mr-2"></i>Cancel
        </button>
        <button type="submit" [disabled]="!bannerForm.form.valid" class="btn btn-sm btn-default text-white">
            <i class="fa fa-save mr-2"></i> {{data.operation|titlecase}}
        </button>
    </mat-dialog-actions>
</form>